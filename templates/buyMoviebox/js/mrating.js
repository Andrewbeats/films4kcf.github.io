
function rating_like(id, act){
	ShowLoading('');
    $.post(dle_root + "engine/ajax/mrating.php", {news_id:id, skin:dle_skin, go_rate:act}, function(data) {
		HideLoading('');
		if( data==1 ) {
			if( act=='1' ) {
				var mn = parseInt($("#d-"+id).html());
				var pl = parseInt($("#l-"+id).html())+1;
			} else {
				var mn = parseInt($("#d-"+id).html())+1;
				var pl = parseInt($("#l-"+id).html());
			}
			var su = pl + mn;
			var lp = Math.abs(pl/su*100);
			var lm = Math.abs(mn/su*100);
			$("#counter-"+id).html(su);
			$("#success-"+id).css({width:lp+'%'});
			$("#dangers-"+id).css({width:lm+'%'});
			$("#mratesb-"+id).find(".btn").attr('disabled', 'disabled');
			if(act=='1'){$("#l-"+id).html(pl);}else{$("#d-"+id).html(mn);}
		}
		if(data==0) $("#mratesb-"+id).find(".btn").attr('disabled', 'disabled'); ("Ви вже голосували", dle_info);
	});
	return false;
}

$(document).ready(function() {
    rating_mg();
});

function rating_mg() {
	$("div[id^=id-]").each(function() {
		var id = $(this).attr('id').replace("id-", "");
		var mn = parseInt($(this).find("#d-"+id).html());
		var pl = parseInt($(this).find("#l-"+id).html());
		var su = pl + mn;
		var lp = Math.abs(pl/su*100);
		var lm = Math.abs(mn/su*100);
		$("#success-"+id).css({width:lp+'%'});
		$("#dangers-"+id).css({width:lm+'%'});
	});
}

(function(){function e(){var t=p(arguments);S.push.apply(S,t);e.after(t);return e}function t(e,n,r,i){k[n.shift()].require(e,function(){n.length?t(e,n,r,i):r.apply(this,arguments)},i)}function n(e,t,n){return n?function(){return e.apply(this,t.apply(this,arguments))}:function(){t.apply(this,arguments);return e.apply(this,arguments)}}function r(e,t,n){return n?function(){return t.apply(this,[e.apply(this,arguments)].concat(p(arguments)))}:function(){var n=e.apply(this,arguments);t.apply(this,arguments);return n}}function i(e,t){var n=e[t];e[t].callbacks||(e[t]=function(){var t=arguments.callee,r;r=n.apply(e,arguments);var i=t.callbacks,s=i.length;t.called=!0;for(t=0;t<s;t++)i[t].called();return r},e[t].callbacks=[]);return e[t]}function s(e,t){this.obj=e;this.meth=t;i(e,t);this.calls=0}function o(){var e=p(arguments),t=e[e.length-1];"function"===typeof t&&(e[e.length-1]={fn:t},e.push("fn"));for(var t=e.pop(),n=e.pop(),t=new s(n,t),n=0;n<e.length;n+=2)t.add(e[n],e[n+1]);t.go()}var u=function(){return this}.call(null),a=u.document,f=function(){var e=a.createElement("script");e.type="text/javascript";return e},l=function(){var e=a.documentElement,t=a.getElementsByTagName("head")[0];t||(t=a.createElement("head"),e.insertBefore(t,e.firstChild));l=function(){return t};return t},c=function(e,t){for(var n in t)e[n]=t[n];return e},h=function(e,t){for(var n=0,r=e.length;n<r;n++)t.call(e[n],n,e[n]);return e},p=function(e){var t=[];h(e,function(e,n){t[e]=n});return t},d=a&&function(){var e=f();e.setAttribute("onerror","return;");return"function"===typeof e.onerror?!0:"onerror"in e}(),v=!1,m=a&&f().attachEvent,g=function(){},y=u.steal,b="object"==typeof y?y:{};e.File=function(t){if(this.constructor!=e.File)return new e.File(t);this.path="string"==typeof t?t:t.path};var w=e.File,E;w.cur=function(e){if(void 0!==e)E=w(e);else return E||w("")};c(w.prototype,{clean:function(){return this.path.match(/([^\?#]*)/)[1]},ext:function(){var e=this.clean().match(/\.([\w\d]+)$/);return e?e[1]:""},dir:function(){var e=this.clean(),t=e.lastIndexOf("/"),t=-1!=t?e.substring(0,t):"";return/^(https?:\/|file:\/)$/.test(t)?e:t},filename:function(){var e=this.clean(),t=e.lastIndexOf("/"),t=-1!=t?e.substring(t+1,e.length):e;return/^(https?:\/|file:\/)$/.test(t)?e:t},domain:function(){var e=this.path.match(/^(?:https?:\/\/)([^\/]*)/);return e?e[1]:null},join:function(e){return w(e).joinFrom(this.path)},joinFrom:function(t,n){var r=w(t);if(this.protocol()){var i=this.domain(),r=r.domain();return i&&i==r?this.toReferenceFromSameDomain(t):this.path}if(t===e.pageUrl().dir()&&!n)return this.path;if(this.isLocalAbsolute())return(r.domain()?r.protocol()+"//"+r.domain():"")+this.path;if(""===t)return this.path.replace(/\/$/,"");var i=t.split("/"),r=this.path.split("/"),s=r[0];for(t.match(/\/$/)&&i.pop();".."==s&&0<r.length&&i.pop();)r.shift(),s=r[0];return i.concat(r).join("/")},relative:function(){return null===this.path.match(/^(https?:|file:|\/)/)},toReferenceFromSameDomain:function(e){for(var t=this.path.split("/"),e=e.split("/"),n="";0<t.length&&0<e.length&&t[0]==e[0];)t.shift(),e.shift();h(e,function(){n+="../"});return n+t.join("/")},isCrossDomain:function(){return this.isLocalAbsolute()?!1:this.domain()!=w(u.location.href).domain()},isLocalAbsolute:function(){return 0===this.path.indexOf("/")},protocol:function(){var e=this.path.match(/^(https?:|file:)/);return e&&e[0]},normalize:function(){var e=w.cur().dir(),t=this.path;if(/^\/\//.test(this.path))t=this.path.substr(2);else if(/^\.\//.test(this.path))this.path=this.path.substr(2),t=this.joinFrom(e),this.path="./"+this.path;else if(!/^[^\.|\/]/.test(this.path)&&(this.relative()||w.cur().isCrossDomain()&&!this.protocol()))t=this.joinFrom(e);return t}});var S=[],x=0,T={};e.p={make:function(t){var n=new e.p.init(t),r=n.options.rootSrc;n.unique&&r&&(!T[r]&&!T[r+".js"]?T[r]=n:(n=T[r],c(n.options,"string"===typeof t?{}:t)));return n},init:function(t){this.dependencies=[];this.id=++x;if(t)if("function"==typeof t){var n=w.cur().path;this.options={fn:function(){w.cur(n);t(e.send||u.jQuery||e)},rootSrc:n,orig:t,type:"fn"};this.waits=!0;this.unique=!1}else this.orig=t,this.options=e.makeOptions(c({},"string"==typeof t?{src:t}:t)),this.waits=this.options.waits||!1,this.unique=!0;else this.options={},this.waits=!1,this.pack="production.js"},complete:function(){this.completed=!0},loaded:function(t){var n,r,t=t&&t.src||this.options.src;w.cur(this.options.rootSrc);this.isLoaded=!0;v&&t&&(n=R[t]);n||(n=S.slice(0),S=[]);if(n.length){var i=this,s,u="production"==e.options.env,a=[],f=function(t,n,r,i){var s=[r,i];h(t,function(e,t){s.unshift(t,n)});o.apply(e,s)},l=function(e,t,n,r){h(n,function(n,i){o(e,t,i,r)})};h(n.reverse(),function(t,n){if(!u||!n.ignore){r=e.p.make(n);i.dependencies.unshift(r);if(r.waits===false)a.push(r);else{if(s){f(a.concat(r),"complete",s,"load");l(r,"complete",a.length?a:[s],"load")}else{f(a.concat(r),"complete",i,"complete");a.length&&l(r,"complete",a,"load")}s=r;a=[]}}});a.length?(s?f(a,"complete",s,"load"):f(a,"complete",i,"complete"),h(a.reverse(),function(){this.load()})):s?s.load():i.complete()}else this.complete()},load:function(){if(!this.loading&&!this.isLoaded){this.loading=!0;var t=this;e.require(this.options,function(e){t.loaded(e)},function(){u.clearTimeout&&u.clearTimeout(t.completeTimeout);throw"steal.js : "+t.options.src+" not completed"})}}};e.p.init.prototype=e.p;var N;c(e,{root:w(""),rootUrl:function(t){if(void 0!==t){e.root=w(t);var n=e.pageUrl(),t=n.join(t);w.cur(n.toReferenceFromSameDomain(t));return e}return e.root.path},extend:c,pageUrl:function(t){return t?(N=w(w(t).clean()),e):N||w("")},cur:function(t){if(void 0===t)return w.cur();w.cur(t);return e},isRhino:u.load&&u.readUrl&&u.readFile,options:{env:"development",loadProduction:!0},add:function(e){T[e.rootSrc]=e},makeOptions:function(t){w(t.src).ext()||(t.src=0==t.src.indexOf(".")||0==t.src.indexOf("/")?t.src+".js":t.src+"/"+w(t.src).filename()+".js");var n=e.File(t.src).normalize(),r=e.File(t.src).protocol();c(t,{originalSrc:t.src,rootSrc:n,src:e.root.join(n),protocol:r||(a?location.protocol:"file:")});t.originalSrc=t.src;return t},then:function(){var t="function"==typeof arguments[0]?arguments:[function(){}].concat(p(arguments));return e.apply(u,t)},bind:function(t,n){C[t]||(C[t]=[]);var r=e.events[t];r&&r.add&&(n=r.add(n));n&&C[t].push(n);return e},one:function(t,n){e.bind(t,function(){n.apply(this,arguments);e.unbind(t,arguments.callee)});return e},events:{},unbind:function(e,t){for(var n=C[e]||[],r=0;r<n.length;)t===n[r]?n.splice(r,1):r++},trigger:function(e,t){for(var n=C[e]||[],r=[],i=0,s=n.length;i<s;i++)r[i]=n[i];h(r,function(e,n){n(t)})},loading:function(){useInteractive=!1;h(arguments,function(t,n){e.p.make(n).loading=!0})},preloaded:function(){},loaded:function(t){t=e.p.make(t);t.loading=!0;i(t,"complete");e.preloaded(t);t.loaded();return e}});var C={},g=n(g,function(){e.pageUrl(u.location?u.location.href:"")}),k=e.types={};e.type=function(e,t){var n=e.split(" ");if(!t)return k[n.shift()].require;k[n.shift()]={require:t,convert:n}};e.p.load=n(e.p.load,function(){var e=this.options;if(!e.type){var t=w(e.src).ext();!t&&!k[t]&&(t="js");e.type=t}if(!k[e.type])throw"steal.js - type "+e.type+" has not been loaded.";t=k[e.type].convert;e.buildType=t.length?t[t.length-1]:e.type});e.require=function(e,n,r){var i=k[e.type];i.convert.length?(i=i.convert.slice(0),i.unshift("text",e.type)):i=[e.type];t(e,i,n,r)};var L=function(e){e.onreadystatechange=e.onload=e.onerror=null;l().removeChild(e)},A,O=/loaded|complete/;e.type("js",function(e,t,n){var r=f();if(e.text)r.text=e.text;else{var i=function(){if(!r.readyState||O.test(r.readyState))L(r),t(r)};m?r.attachEvent("onreadystatechange",i):r.onload=i;d&&n&&"file:"!==e.protocol&&(m?r.attachEvent("onerror",n):r.onerror=n);r.src=e.src;r.onSuccess=t}A=r;l().insertBefore(r,l().firstChild);e.text&&(t(),L(r))});e.type("fn",function(e,t){t(e.fn())});e.type("text",function(t,n,r){e.request(t,function(e){t.text=e;n(e)},r)});var M=0,_=a&&a.createStyleSheet,D;e.type("css",function(e,t){if(e.text){var n=a.createElement("style");n.type="text/css";if(n.styleSheet)n.styleSheet.cssText=e.text;else{var r=a.createTextNode(e.text);0<n.childNodes.length?n.firstChild.nodeValue!==r.nodeValue&&n.replaceChild(r,n.firstChild):n.appendChild(r)}l().appendChild(n)}else if(_){if(30==M||!D)D=document.createStyleSheet(),M=0;D.addImport(e.src);M++}else e=e||{},n=a.createElement("link"),n.rel=e.rel||"stylesheet",n.href=e.src,n.type="text/css",l().appendChild(n);t()});if(b.types)for(var P in b.types)e.type(P,b.types[P]);var H=function(){return u.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest};e.request=function(e,t,n){var r=new H,i=e.contentType||"application/x-www-form-urlencoded; charset=utf-8",s=function(){r=o=s=null},o=function(){4===r.readyState&&(500===r.status||404===r.status||2===r.status||0>r.status||0===r.status&&""===r.responseText?n&&n(r.status):t(r.responseText),s())};r.open("GET",e.src,!1===e.async?!1:!0);r.setRequestHeader("Content-type",i);r.overrideMimeType&&r.overrideMimeType(i);r.onreadystatechange=function(){o()};try{r.send(null)}catch(u){s&&(console.error(u),n&&n(),s())}};var B=function(t){var n,r;for(n in e.mappings)if(r=e.mappings[n],r.test.test(t))return t.replace(n,r.path);return t};w.prototype.mapJoin=function(e){e=B(e);return w(e).joinFrom(this.path)};e.makeOptions=r(e.makeOptions,function(t){t.src=e.root.join(t.rootSrc=B(t.rootSrc))});e.mappings={};e.map=function(t,n){if("string"==typeof t)e.mappings[t]={test:RegExp("^("+t+")([/.]|$)"),path:n};else for(var r in t)e.map(r,t[r]);return this};var j;c(e,{after:function(){if(!j){var t=j=new e.p.init,n=function(){e.trigger("start",t);o(t,"complete",function(){e.trigger("end",t)});t.loaded()};u.setTimeout?setTimeout(n,0):n()}},_before:n,_after:r});e.p.complete=n(e.p.complete,function(){this===j&&(j=null)});(function(){var t=!1,r,i=!1;e.p.loaded=n(e.p.loaded,function(){var e="undefined"!==typeof jQuery?jQuery:null;e&&"readyWait"in e&&!t&&(r=e,e.readyWait+=1,t=!0)});e.bind("end",function(){t&&!i&&(r.ready(!0),i=!0)})})();e.p.load=r(e.p.load,function(){if(u.document&&!this.completed&&!this.completeTimeout&&!e.isRhino&&("file:"==this.options.protocol||!d)){var t=this;this.completeTimeout=setTimeout(function(){throw"steal.js : "+t.options.src+" not completed"},5e3)}});e.p.complete=r(e.p.complete,function(){this.completeTimeout&&clearTimeout(this.completeTimeout)});c(s.prototype,{called:function(){this.calls--;this.go()},add:function(e,t){var n=i(e,t);n.called||(n.callbacks.push(this),this.calls++)},go:function(){if(0===this.calls)this.obj[this.meth]()}});var F={load:function(){},end:function(){}},I=!1;(function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):n()})(u,"load",function(){F.load()});e.one("end",function(t){F.end();I=t;e.trigger("done",I)});o(F,"load",F,"end",function(){e.trigger("ready");e.isReady=!0});e.events.done={add:function(e){return I?(e(I),!1):e}};e.p.make=r(e.p.make,function(t){t.options.has&&(t.isLoaded?t.loadHas():e.loading.apply(e,t.options.has));return t},!0);e.p.loaded=n(e.p.loaded,function(){this.options.has&&this.loadHas()});e.p.loadHas=function(){var t,n,r=w.cur();for(n=0;n<this.options.has.length;n++)w.cur(r),t=e.p.make(this.options.has[n]),i(t,"complete"),t.loaded()};var q,R={},U=function(){var e,t,n=a.getElementsByTagName("script");for(e=n.length-1;-1<e&&(t=n[e]);e--)if("interactive"===t.readyState)return t},z=function(){var e;return q&&"interactive"===q.readyState?q:(e=U())?q=e:A&&"interactive"==A.readyState?A:null};if(v=a&&!!U())e.after=r(e.after,function(){var e=z();e&&e.src&&!/steal\.(production|production\.[a-zA-Z0-9\-\.\_]*)*js/.test(e.src)&&(e=e.src,R[e]||(R[e]=[]),e&&(R[e].push.apply(R[e],S),S=[]))}),e.preloaded=n(e.preloaded,function(e){var e=e.options.src,t=z().src;R[e]=R[t];R[t]=null});var W=/steal\.(production\.)?js.*/;e.getScriptOptions=function(t){var n;if(!(n=t))e:{if(a){n=a.getElementsByTagName("script");for(var t=0,r=n.length;t<r;t++){var i=n[t].src;if(i&&W.test(i)){n=n[t];break e}}}n=void 0}t=n;n={};if(t&&(t=t.src,r=t.replace(W,""),n.rootUrl=/steal\/$/.test(r)?r.substr(0,r.length-6):r+"../",/steal\.production\.js/.test(t)&&(n.env="production"),-1!==t.indexOf("?")))if(t=t.split("?")[1],t=t.split(","),t[0]&&(n.startFile=t[0]),t[1]&&"production"!=e.options.env)n.env=t[1];return n};g=r(g,function(){var t=e.options,n=[];c(t,e.getScriptOptions());"object"==typeof y&&c(t,y);var r=u.location&&decodeURIComponent(u.location.search);r&&r.replace(/steal\[([^\]]+)\]=([^&]+)/g,function(e,n,r){e=r.split(",");1<e.length&&(r=e);t[n]=r});e.rootUrl(t.rootUrl);t.startFile&&"-1"==t.startFile.indexOf(".")&&(t.startFile=t.startFile+"/"+t.startFile.match(/[^\/]+$/)[0]+".js");t.logLevel||(t.logLevel=0);!t.production&&t.startFile&&(t.production=w(t.startFile).dir()+"/production.js");t.production&&(t.production+=-1==t.production.indexOf(".js")?".js":"");h(t.loaded||[],function(t,n){e.loaded(n)});"string"===typeof t.startFiles?n.push(t.startFiles):t.startFiles&&t.startFiles.length&&(n=t.startFiles);r=[];n.length&&(e.options.startFiles=n,r.push.apply(r,n));try{(t.instrument||!t.browser&&u.top&&u.top.opener&&u.top.opener.steal&&u.top.opener.steal.options.instrument)&&r.push(function(){},{src:"steal/instrument",waits:!0})}catch(i){}"production"==t.env&&t.loadProduction?t.production&&e({src:t.production,force:!0}):(!1!==t.loadDev&&r.unshift({src:"steal/dev/dev.js",ignore:!0}),t.startFile&&r.push(t.startFile));r.length&&e.apply(null,r)});e.when=o;u.steal=e;g()})()